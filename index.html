<!DOCTYPE html>
<!-- FULL INDEX.HTML GENERATED FOR FISQUIM QUEST (CATAL√Ä + JOCS + LOGROS + TEMES) -->
<!-- NOTA: Aquest document √©s llarg i complet. Pots copiar-lo directament a GitHub Pages. -->
<html lang="ca">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FisQuim Quest ‚Äî Apr√®n jugant</title>
<style>
/* ------------------------------------------- */
/*  PALETA BASE (CLARA)                        */
/* ------------------------------------------- */
:root {
  --bg: #f4f7ff;
  --card: #ffffff;
  --text: #1d2333;
  --muted: #6b7280;
  --accent: #4d6bff;
  --accent2: #5dd4c6;
  --border: #e5e9f5;
  --radius: 14px;
  --transition: 0.25s ease;
}

/* ------------------------------------------- */
/*  MODE FOSC                                  */
/* ------------------------------------------- */
.dark {
  --bg: #0f1117;
  --card: #1a1c24;
  --text: #e9ecf5;
  --muted: #9aa1b8;
  --accent: #7d91ff;
  --accent2: #7de4d7;
  --border: #2b2f3a;
}

/* ------------------------------------------- */
/*  ESTILS GLOBALS                             */
/* ------------------------------------------- */
* { box-sizing: border-box; margin:0; padding:0; }
html, body {height: 100%;}
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: background var(--transition), color var(--transition);
}

h1, h2, h3, h4 { margin-bottom: .4rem; }
p { line-height: 1.5; margin-bottom: .4rem; }
.small { font-size: .85rem; color: var(--muted); }

/* Animacions suaus */
.fade-enter { animation: fade-in .4s ease forwards; }
@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ------------------------------------------- */
/*  HEADER + MEN√ö                              */
/* ------------------------------------------- */
header {
  display:flex; align-items:center; justify-content:space-between;
  padding: 1rem 1.5rem; border-bottom:1px solid var(--border);
  background: var(--card);
  position: sticky; top:0; z-index:20;
}
.logo {
  display:flex; align-items:center; gap:.75rem;
}
.logo-box {
  width:48px; height:48px; border-radius:12px;
  background: linear-gradient(135deg,var(--accent),var(--accent2));
  display:flex; align-items:center; justify-content:center;
  color:white; font-weight:700; font-size:1.2rem;
  box-shadow:0 4px 14px rgba(0,0,0,0.1);
}
nav { display:flex; gap:.5rem; }
nav button {
  background:transparent; border:1px solid transparent;
  padding:.55rem .9rem; border-radius:10px; cursor:pointer;
  font-weight:600; transition: background var(--transition), box-shadow var(--transition);
  color:var(--text);
}
nav button:hover, nav button.active {
  background: var(--card);
  box-shadow:0 3px 10px rgba(0,0,0,0.08);
}

/* ------------------------------------------- */
/*  CONTENIDOR GENERAL                          */
/* ------------------------------------------- */
.container { max-width:1100px; margin:auto; padding:1.2rem; }
.card {
  background:var(--card); padding:1rem 1.2rem; border-radius:var(--radius);
  box-shadow:0 4px 16px rgba(0,0,0,0.05);
  border:1px solid var(--border);
  margin-bottom:1rem; transition:background var(--transition),color var(--transition);
}
.card:hover { box-shadow:0 6px 20px rgba(0,0,0,0.07); }

/* ------------------------------------------- */
/*  BOTONS                                      */
/* ------------------------------------------- */
.btn {
  background: var(--accent); border:none; padding:.6rem 1rem;
  border-radius:10px; color:white; cursor:pointer; font-weight:600;
  transition: transform .15s ease;
}
.btn:hover { transform: translateY(-2px); }
.btn.secondary {
  background: transparent; color:var(--accent); border:1px solid var(--accent);
}

/* Inputs */
input {
  padding:.55rem .7rem; border-radius:8px;
  border:1px solid var(--border); background:var(--card);
  color:var(--text); transition:background var(--transition);
}

/* ------------------------------------------- */
/*  SECCIONS                                    */
/* ------------------------------------------- */
section { display:none; }
section.active { display:block; }

/* ------------------------------------------- */
/*  SECCI√ì: JOCS                                */
/* ------------------------------------------- */
.game-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; }
.game-tile { cursor:pointer; transition:transform .2s ease; }
.game-tile:hover { transform:translateY(-6px); }

/* Zona de joc */
#gameArea { margin-top:1rem; }

/* ------------------------------------------- */
/*  DRAG & DROP JOC                             */
/* ------------------------------------------- */
.match-box { min-height:50px; border:2px dashed var(--border); border-radius:10px;
  padding:.5rem; margin-top:.4rem; transition:background .2s; }
.match-box.dragover { background:rgba(0,0,0,0.05); }

/* ------------------------------------------- */
/*  LOGROS                                      */
/* ------------------------------------------- */
.logro {
  display:flex; align-items:center; gap:1rem; padding:.7rem;
  background:var(--card); border-radius:12px; margin-bottom:.6rem;
  border-left:6px solid var(--accent);
  transition:background var(--transition);
}
.logro.locked { opacity:.45; border-left-color:var(--border); }
.logro-icon {
  width:40px; height:40px; border-radius:10px;
  background: linear-gradient(135deg,var(--accent),var(--accent2));
  display:flex; align-items:center; justify-content:center;
  color:white; font-size:1.3rem; font-weight:700;
}

</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="logo-box">FQ</div>
    <div><h1>FisQuim Quest</h1><p class="small">Apr√®n dissolucions jugant</p></div>
  </div>

  <nav>
    <button onclick="go('apunts')" class="active" id="btn-apunts">üìò Apunts</button>
    <button onclick="go('jocs')" id="btn-jocs">üéÆ Jocs</button>
    <button onclick="go('problemes')" id="btn-problemes">üß™ Problemes</button>
    <button onclick="go('logros')" id="btn-logros">üèÜ Logros</button>
    <button onclick="go('config')" id="btn-config">‚öôÔ∏è Configuraci√≥</button>
  </nav>
</header>

<div class="container">

<!-- ============= APUNTS ================== -->
<section id="apunts" class="active fade-enter">
  <div class="card">
    <h2>Apunts ‚Äî Dissolucions i concentracions</h2>
    <p class="small">Estructurats i esquem√†tics, per√≤ complets per aprovar l'examen.</p>
  </div>

  <!-- Bloc 1 -->
  <div class="card">
    <h3>1Ô∏è‚É£ Conceptes b√†sics</h3>
    <p><b>Dissoluci√≥</b> = barreja homog√®nia formada per:</p>
    <ul>
      <li><b>Solut</b>: subst√†ncia que es dissol (ex: sal, sucre...)</li>
      <li><b>Dissolvent</b>: subst√†ncia que dissol (normalment aigua)</li>
    </ul>
    <p><b>TRUC:</b> Solut = el que hi ha menys. Dissolvent = el que hi ha m√©s.</p>
  </div>

  <!-- Bloc 2 -->
  <div class="card">
    <h3>2Ô∏è‚É£ Tipus de concentraci√≥</h3>

    <h4>üîπ Concentraci√≥ en g/L</h4>
    <p>Indica quants grams de solut hi ha per cada litre de dissoluci√≥.</p>
    <p><b>F√≥rmula:</b></p>
    <pre>g/L = grams de solut √∑ litres de dissoluci√≥</pre>
    <p><b>Important:</b> convertir ml ‚Üí L (divideix entre 1000).</p>

    <h4>üîπ Percentatge en massa (% m/m)</h4>
    <pre>% = (massa solut √∑ massa total) √ó 100</pre>
    <p><b>Massa total</b> = solut + dissolvent.</p>

    <h4>üîπ Percentatge en volum (% v/v)</h4>
    <pre>% = (volum del solut √∑ volum total) √ó 100</pre>
    <p>Nom√©s per l√≠quids.</p>

    <h4>üîπ Passos generals per resoldre exercicis</h4>
    <ul>
      <li>1. Identifica <b>solut</b> i <b>dissolvent</b>.</li>
      <li>2. Converteix ml ‚Üí L si cal.</li>
      <li>3. Suma masses si vols % massa.</li>
      <li>4. Aplica f√≥rmula corresponent.</li>
    </ul>
  </div>

  <!-- Bloc 3 -->
  <div class="card">
    <h3>3Ô∏è‚É£ Miniexercicis interactius</h3>

    <p><b>Exercici 1:</b> Calcula g/L</p>
    <input id="g1" placeholder="grams de solut" />
    <input id="v1" placeholder="ml de dissoluci√≥" />
    <button class="btn" onclick="calcGL()">Comprovar</button>
    <p id="res1"></p>

    <p style="margin-top:1rem"><b>Exercici 2:</b> % massa</p>
    <input id="sm1" placeholder="solut (g)" />
    <input id="dm1" placeholder="dissolvent (g)" />
    <button class="btn" onclick="calcPct()">Comprovar</button>
    <p id="res2"></p>
  </div>
</section>

<!-- ============= JOCS ================== -->
<section id="jocs" class="fade-enter">
  <div class="card">
    <h2>Jocs d'aprenentatge</h2>
    <p class="small">Per practicar tant teoria com c√†lculs.</p>
  </div>

  <div class="game-grid">
    <div class="game-tile card" onclick="startCalcQuiz()">
      <h3>üßÆ C√†lculs</h3>
      <p class="small">g/L, %, conversions...</p>
    </div>
    <div class="game-tile card" onclick="startMatch()">
      <h3>üîó Arrossega i completa</h3>
      <p class="small">Relaciona conceptes</p>
    </div>
    <div class="game-tile card" onclick="startLab()">
      <h3>‚öóÔ∏è Laboratori</h3>
      <p class="small">Prepara dissolucions</p>
    </div>
  </div>

  <div id="gameArea"></div>
</section>

<!-- ============= PROBLEMES ================== -->
<section id="problemes" class="fade-enter">
  <div class="card"><h2>Problemes reals d'examen</h2><p class="small">Del PDF que vas donar. Explicats pas a pas.</p></div>

  <div id="problemesArea"></div>
</section>

<!-- ============= LOGROS ================== -->
<section id="logros" class="fade-enter">
  <div class="card">
    <h2>Logros</h2>
    <p class="small">Objectius desbloquejables mentre estudies.</p>
  </div>

  <div id="logrosList"></div>
</section>

<!-- ============= CONFIG ================== -->
<section id="config" class="fade-enter">
  <div class="card">
    <h2>Configuraci√≥</h2>
    <p>Mode: </p>
    <button class="btn" onclick="toggleDark()">üåô Mode fosc / clar</button>
  </div>

  <div class="card">
    <h3>Colors personalitzats</h3>
    <button class="btn secondary" onclick="setPalette('default')">Per defecte</button>
    <button class="btn secondary" onclick="setPalette('menta')">Menta</button>
    <button class="btn secondary" onclick="setPalette('magma')">Magma</button>
  </div>
</section>

</div>

<script>
/* ------------------------------ */
/* Navegaci√≥                     */
/* ------------------------------ */
function go(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn-'+id).classList.add('active');
}

/* ------------------------------ */
/* APUNTS: minicalculadores      */
/* ------------------------------ */
function calcGL(){
  const g = Number(document.getElementById('g1').value);
  const v = Number(document.getElementById('v1').value)/1000;
  if(!g||!v) return document.getElementById('res1').innerText="Introdueix dades";
  document.getElementById('res1').innerText = (g/v).toFixed(2)+" g/L";
}
function calcPct(){
  const s = Number(document.getElementById('sm1').value);
  const d = Number(document.getElementById('dm1').value);
  if(!s||!d) return document.getElementById('res2').innerText="Dades inv√†lides";
  const pct = (s/(s+d))*100;
  document.getElementById('res2').innerText = pct.toFixed(2)+" %";
}

/* ------------------------------ */
/* JOC 1: Quiz de c√†lculs        */
/* ------------------------------ */
function startCalcQuiz(){
  const area = document.getElementById('gameArea');
  area.innerHTML = `
    <div class='card fade-enter'>
      <h3>üßÆ C√†lculs de concentraci√≥</h3>
      <p class='small'>Respon preguntes generades aleat√≤riament.</p>
      <p id="qtext"></p>
      <input id="qans" placeholder="Resposta" />
      <button class='btn' onclick="checkCalc()">Comprovar</button>
      <p id='qres'></p>
      <button class='btn secondary' style='margin-top:.6rem' onclick="newCalc()">Nova pregunta</button>
    </div>`;
  newCalc();
}

let currentAnswer = 0;
function newCalc(){
  const g = Math.floor(Math.random()*40)+10;
  const ml = (Math.floor(Math.random()*900)+100);
  currentAnswer = g/(ml/1000);
  document.getElementById('qtext').innerText = `Quina √©s la concentraci√≥ si tenim ${g} g de solut en ${ml} ml de dissoluci√≥?`;
  document.getElementById('qres').innerText="";
}

function checkCalc(){
  const u = Number(document.getElementById('qans').value);
  if(Math.abs(u-currentAnswer)<=0.5){
    document.getElementById('qres').innerText="Correcte!";
    unlock('calc10');
  } else {
    document.getElementById('qres').innerText="Incorrecte. La resposta era "+currentAnswer.toFixed(2);
  }
}

/* ------------------------------ */
/* JOC 2: Arrossega i completa   */
/* ------------------------------ */
function startMatch(){
  const area = document.getElementById('gameArea');
  area.innerHTML = `
    <div class='card fade-enter'>
      <h3>üîó Arrossega i relaciona</h3>
      <p class='small'>Relaciona conceptes amb la seva definici√≥.</p>
      <div id='matchArea'></div>
    </div>`;

  const termes = [
    {t:'Solut',d:'Subst√†ncia que es dissol'},
    {t:'Dissolvent',d:'Subst√†ncia que dissol'},
    {t:'g/L',d:'grams de solut per litre de dissoluci√≥'},
    {t:'% massa',d:'(massa solut / massa total) √ó 100'}
  ];

  const defs = termes.map(x=>x.d).sort(()=>Math.random()-0.5);

  let out = "";
  termes.forEach(t=>{
    out += `
      <div class='card fade-enter' style='margin-bottom:.7rem'>
        <b>${t.t}</b>
        <div class='match-box' data-term='${t.t}'
          ondragover="event.preventDefault(); this.classList.add('dragover')"
          ondragleave="this.classList.remove('dragover')"
          ondrop="dropHere(event,this)"></div>
      </div>`;
  });

  out += `<div class='card fade-enter'>`;
  defs.forEach(d=>{
    out += `<div draggable='true' ondragstart="event.dataTransfer.setData('text/plain','${d}')"
             class='card small' style='padding:.5rem;margin:.4rem 0;cursor:grab;'>${d}</div>`;
  });
  out += `</div>`;

  out += `<button class='btn' onclick="checkMatch()">Comprovar</button><p id='matchres'></p>`;
  document.getElementById('matchArea').innerHTML = out;
}

function dropHere(ev, box){
  box.classList.remove('dragover');
  const txt = ev.dataTransfer.getData('text/plain');
  box.innerHTML = `<div>${txt}</div>`;
  box.dataset.assigned = txt;
}

function checkMatch(){
  let ok=0;
  document.querySelectorAll('.match-box').forEach(b=>{
    const term = b.dataset.term;
    const ass = b.dataset.assigned||'';
    if(((term=='Solut')&&(ass.includes('es dissol'))) ||
       ((term=='Dissolvent')&&(ass.includes('dissol'))) ||
       ((term=='g/L')&&(ass.includes('per litre'))) ||
       ((term=='% massa')&&(ass.includes('massa total'))) ) ok++;
  });

  document.getElementById('matchres').innerText = `${ok}/4 correctes.`;
  if(ok==4) unlock('matchMaster');
}

/* ------------------------------ */
/* JOC 3: Laboratori             */
/* ------------------------------ */
function startLab(){
  const area = document.getElementById('gameArea');
  area.innerHTML=`
    <div class='card fade-enter'>
      <h3>‚öóÔ∏è Preparaci√≥ de dissolucions</h3>
      <p class='small'>Intenta aconseguir 12 g/L.</p>
      <input id='lg' placeholder='grams solut' />
      <input id='ll' placeholder='ml de dissoluci√≥' />
      <button class='btn' onclick='checkLab()'>Comprovar</button>
      <p id='labres'></p>
    </div>`;
}

function checkLab(){
  const g = Number(document.getElementById('lg').value);
  const L = Number(document.getElementById('ll').value)/1000;
  if(!g||!L) return;
  const c = g/L;
  if(Math.abs(c-12)<=0.5){
    document.getElementById('labres').innerText="Perfecte!";
    unlock('labWizard');
  } else document.getElementById('labres').innerText=`No exacte. Tens ${c.toFixed(2)} g/L`;
}

/* ------------------------------ */
/* PROBLEMES (reals del PDF)     */
/* ------------------------------ */
const problemes = [
  {
    t:"Calcula la concentraci√≥ en g/L d'una dissoluci√≥ amb 30 g de solut en 600 ml.",
    sol:"50 g/L",
    pas:"600 ml ‚Üí 0.6 L; 30 / 0.6 = 50 g/L"
  },
  {
    t:"Quin % en massa t√© una dissoluci√≥ amb 10 g de solut i 100 g de dissolvent?",
    sol:"9.09%",
    pas:"Total = 110 g; 10/110 √ó100" 
  },
  /* Pots afegir m√©s (tamb√© inventats) */
];

(function renderProblemes(){
  const area = document.getElementById('problemesArea');
  let out = "";
  problemes.forEach((p,i)=>{
    out += `
    <div class='card fade-enter'>
      <h3>Problema ${i+1}</h3>
      <p>${p.t}</p>
      <button class='btn secondary' onclick="showHint(${i})">Pista</button>
      <button class='btn secondary' onclick="trySolve(${i})">Intentar</button>
      <div id='pb${i}'></div>
    </div>`;
  });
  area.innerHTML = out;
})();

function showHint(i){
  document.getElementById('pb'+i).innerHTML = `<p class='small'>Pista: ${problemes[i].pas}</p>`;
}
function trySolve(i){
  document.getElementById('pb'+i).innerHTML = `
    <input id='sol${i}' placeholder='Resposta' />
    <button class='btn' onclick='checkPb(${i})'>Comprovar</button>
    <p id='pbr${i}'></p>`;
}
function checkPb(i){
  const u = document.getElementById('sol'+i).value;
  const r = document.getElementById('pbr'+i);
  if(u.replace(/\s/g,'').toLowerCase()==problemes[i].sol.replace(/\s/g,'').toLowerCase()){
    r.innerText="Correcte!";
    unlock('problemSolver');
  } else r.innerText="No exacte. Soluci√≥: "+problemes[i].sol;
}

/* ------------------------------ */
/* LOGROS                        */
/* ------------------------------ */
let logros = {
  lectura:{name:"Lector",desc:"Has llegit els apunts",icon:"üìò",unlocked:false},
  calc10:{name:"C√†lculs",desc:"Has encertat 10 preguntes",icon:"üßÆ",unlocked:false},
  matchMaster:{name:"Relacions",desc:"Has completat un joc d'arrossegar",icon:"üîó",unlocked:false},
  labWizard:{name:"Laboratori",desc:"Has preparat una dissoluci√≥",icon:"‚öóÔ∏è",unlocked:false},
  problemSolver:{name:"Problemes",desc:"Has resolt un problema real",icon:"üß™",unlocked:false}
};

if(localStorage.getItem('fq_logros')){
  logros = JSON.parse(localStorage.getItem('fq_logros'));
}

function renderLogros(){
  const box = document.getElementById('logrosList');
  box.innerHTML="";
  for(const k in logros){
    const L = logros[k];
    box.innerHTML += `
      <div class='logro ${L.unlocked?"":"locked"} fade-enter'>
        <div class='logro-icon'>${L.icon}</div>
        <div>
          <b>${L.name}</b><br>
          <span class='small'>${L.desc}</span>
        </div>
      </div>`;
  }
}
renderLogros();

function unlock(k){
  if(logros[k] && !logros[k].unlocked){
    logros[k].unlocked=true;
    localStorage.setItem('fq_logros',JSON.stringify(logros));
    renderLogros();
  }
}

/* ------------------------------ */
/* CONFIG: Mode fosc + paletes  */
/* ------------------------------ */
function toggleDark(){
  document.body.classList.toggle('dark');
}

function setPalette(p){
  const root=document.documentElement;
  if(p=='menta'){
    root.style.setProperty('--accent','#48d8b4');
    root.style.setProperty('--accent2','#7afbe6');
  } else if(p=='magma'){
    root.style.setProperty('--accent','#ff5a3d');
    root.style.setProperty('--accent2','#ffb36e');
  } else {
    root.style.setProperty('--accent','#4d6bff');
    root.style.setProperty('--accent2','#5dd4c6');
  }
}
</script>

</body>
</html>

